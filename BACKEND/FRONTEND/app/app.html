<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>WebRTC Meet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="app.css" />
</head>

<body>

  <!-- ================= HOME VIEW ================= -->
  <section id="homeView" class="view">

    <header class="home-header">
      <!-- top bar -->
      <div class="home-top">
        <img src="../assets/5portal-white.png" alt="logo">

        <div class="search-box">
          <input type="text" placeholder="Search rooms..." id="searchInput" />
        </div>

        <button class="add-room-btn">+ Add room</button>
      </div>
    </header>

    <!-- Create Room Modal -->
    <div class="modal" id="createRoomModal">
      <div class="modal-content">
        <h2>Create a Room</h2>

        <form id="createRoomForm">
          <label for="roomName">Room Name</label>
          <input type="text" id="roomName" placeholder="Enter room name" required />

          <label for="roomType">Room Type</label>
          <select id="roomType" required>
            <option value="game">Game</option>
            <option value="language">Language</option>
            <option value="learning">Learning</option>
            <option value="business">Business</option>
            <option value="coding">Coding</option>
          </select>

          <label for="roomStatus">Status</label>
          <select id="roomStatus" required>
            <option value="public">Public</option>
            <option value="private">Private</option>
          </select>

          <div class="modal-buttons">
            <button type="submit">Create</button>
            <button type="button" id="cancelModal" style="color: red;">Cancel</button>
          </div>
        </form>
      </div>
    </div>


    <div class="visibility-toggle">
      <span class="option active" data-visibility="public">Rooms</span>
      <span class="option" data-visibility="private">Join Private Room</span>
    </div>

    <div class="public">

      <p class="welcom">
        Select a contact to start a video call
      </p>
      <div class="room-filters">
        <button class="filter-chip active" data-type="all">All</button>
        <button class="filter-chip" data-type="game">Games</button>
        <button class="filter-chip" data-type="language">Languages</button>
        <button class="filter-chip" data-type="learning">Learning</button>
        <button class="filter-chip" data-type="business">Business</button>
        <button class="filter-chip" data-type="coding">Coding</button>
      </div>

      <div class="friends-list" id="roomsList">

      </div>
    </div>
    <div class="private">
      <p class="welcom">
        Enter a room code to join a private call
      </p>
      <div class="private-room-entry">
        <input type="text" id="roomCodeInput" placeholder="Enter room code" />
        <button id="joinRoomBtn">Join Room</button>
      </div>
    </div>
      <div class="floating-profile" id="floatingProfile">
    <span class="avatar-circle" id="profileAvatar">A</span>
    <div class="profile-dropdown hidden" id="profileDropdown">
      <p class="user-name" id="userName">User Name</p>
      <button id="logoutBtn">Logout</button>
    </div>
    </div>
  </section>


  <!-- ================= MEETING VIEW ================= -->
  <section id="meetingView" class="view hidden">

    <header class="meeting-header">
      <span>Secure Online Call</span>
      <button id="toggleChatBtn" class="header-btn">üí¨ Chat</button>
    </header>

    <div class="meeting-content">
      <div class="video-area">
        <video id="remoteVideo" autoplay playsinline></video>
        <video id="localVideo" autoplay muted playsinline class="local-video"></video>
        <div id="gameContainer" class="game-container hidden"></div>
      </div>

      <!-- Chat Sidebar -->
      <div id="chatSidebar" class="chat-sidebar hidden">
        <div class="chat-header">
          <h3>Chat</h3>
          <button id="closeChatBtn" class="close-btn">√ó</button>
        </div>
        <div id="chatMessages" class="chat-messages"></div>
        <div class="chat-input-container">
          <input type="text" id="chatInput" placeholder="Type a message..." />
          <button id="sendChatBtn" class="send-btn">Send</button>
        </div>
      </div>
    </div>

    <footer class="controls">
      <button id="micBtn" class="control-btn">üé§ Mute</button>
      <button id="camBtn" class="control-btn">üìπ Stop Video</button>
      <button id="screenShareBtn" class="control-btn">üñ•Ô∏è Share Screen</button>
      <button id="gameBtn" class="control-btn" style="display: none;">üéÆ Games</button>
      <button id="leaveBtn" class="control-btn danger">Leave</button>
    </footer>

  </section>

  <!-- Game Selection Modal -->
  <div class="modal" id="gameModal">
    <div class="modal-content">
      <h2>Choose a Game</h2>
      <div class="game-options">
        <div class="game-option" data-game="tictactoe">
          <h3>‚ùå Tic-Tac-Toe</h3>
          <p>Classic 3x3 game</p>
        </div>
        <div class="game-option" data-game="snake">
          <h3>üêç Snake</h3>
          <p>Race to grow longer</p>
        </div>
        <div class="game-option" data-game="pong">
          <h3>üèì Pong</h3>
          <p>Classic paddle game</p>
        </div>
      </div>
      <div class="modal-buttons">
        <button type="button" id="cancelGameModal">Cancel</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="app.js"></script>
</body>

</html>